{% set class_labels = {
  "bard": "Bardo",
  "cleric": "Chierico",
  "druid": "Druido",
  "paladin": "Paladino",
  "ranger": "Ranger",
  "sorcerer": "Stregone",
  "warlock": "Warlock",
  "wizard": "Mago"
} %}
{% set class_badge_order = ["bard", "cleric", "druid", "paladin", "ranger", "sorcerer", "warlock", "wizard"] %}

<div class="mb-2">
  <div class="h5 mb-0">{{ spell.name }}</div>
  <div class="text-muted small">
    {% if spell.level == 0 %}
      Trucchetto
    {% else %}
      Livello {{ spell.level }}
    {% endif %}
    Â· {{ spell.school }}
    {% if spell.ritual %}
      <span class="badge rounded-pill text-bg-secondary ms-1" title="Rituale">R</span>
    {% endif %}
    {% if spell.concentration %}
      <span class="badge rounded-pill text-bg-secondary ms-1" title="Concentrazione">C</span>
    {% endif %}
  </div>
</div>

{% if spell.class_codes %}
  {% set codes = spell.class_codes.split(",") %}
  <div class="mb-2 d-flex flex-wrap gap-1">
    {% for code in class_badge_order %}
      {% if code in codes %}
        <span class="badge rounded-pill text-bg-light border">{{ class_labels.get(code, code) }}</span>
      {% endif %}
    {% endfor %}
  </div>
{% endif %}

<div class="small text-muted mb-2">
  <span>Tempo di lancio: <strong>{{ spell.casting_time }}</strong></span>
  <span class="mx-2">|</span>
  <span>Gittata: <strong>{{ spell.range_text }}</strong></span>
  <span class="mx-2">|</span>
  <span>Componenti: <strong>{{ spell.components_text }}</strong></span>
  <span class="mx-2">|</span>
  <span>Durata: <strong>{{ spell.duration_text }}</strong></span>
  {% if spell.ritual %}
    <span class="mx-2">|</span><span>Rituale</span>
  {% endif %}
  {% if spell.concentration %}
    <span class="mx-2">|</span><span>Concentrazione</span>
  {% endif %}
</div>

<div class="mt-3">
  <div class="small text-muted mb-1">Descrizione</div>
  <div class="fs-6 spell-body" style="white-space: pre-line;">{{ spell.description }}</div>
</div>

{% if spell.at_higher_levels %}
  <div class="mt-3">
    <div class="small text-muted mb-1">Livelli superiori</div>
    <div class="fs-6 spell-body" style="white-space: pre-line;">{{ spell.at_higher_levels }}</div>
  </div>
{% endif %}
